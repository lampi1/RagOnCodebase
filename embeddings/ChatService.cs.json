{
  "file_name": "ChatService.cs",
  "path": "services\\ChatService.cs",
  "content": "using System.Text;\nusing System.Text.Json;\nusing Elasticsearch.Net;\nusing Nest;\nusing System.Text.RegularExpressions;\n\npublic class ChatService\n{\n    private readonly HttpClient _httpClient;\n    private readonly ElasticClient _elasticClient;\n    private readonly List<ChatMessageContent> _chatHistory;\n    private readonly string _azureApiKey;\n    private readonly string _azureEmbeddingEndpoint;\n    private readonly string _azureCompletionEndpoint;\n    private readonly string _elasticApiKey;\n    private readonly string _elasticCloudID;\n    private readonly string _elasticCloudEndpoint;\n\n    public ChatService(IConfiguration configuration)\n    {\n        _azureApiKey = configuration[\"AzureOpenAI:ApiKey\"];\n        _azureEmbeddingEndpoint = configuration[\"AzureOpenAI:EmbeddingEndpoint\"];\n        _azureCompletionEndpoint = configuration[\"AzureOpenAI:CompletionEndpoint\"];\n\n        _elasticApiKey = configuration[\"ElasticSearch:ApiKey\"];\n        _elasticCloudID = configuration[\"ElasticSearch:CloudId\"];\n        _elasticCloudEndpoint = configuration[\"ElasticSearch:CloudEndPoint\"];\n        _httpClient = new HttpClient\n        {\n            Timeout = Timeout.InfiniteTimeSpan\n        };\n        _httpClient.DefaultRequestHeaders.Add(\"api-key\", _azureApiKey);\n\n        var cloudSettings = new ConnectionSettings(new Uri(_elasticCloudEndpoint))\n            .DefaultIndex(\"codebase_index_v2\")\n            .ApiKeyAuthentication(new ApiKeyAuthenticationCredentials(_elasticApiKey));\n\n        _elasticClient = new ElasticClient(cloudSettings);\n\n        _chatHistory = new List<ChatMessageContent>\n        {\n            new ChatMessageContent(\"system\", \"Devi cercare di rispondere alle domande dell' utente ('user') in modo breve e conciso e basare le tue risposte sul contenuto del progetto che sono pezzi di file con content (contenuto del progetto) filename (nome del file) e path (percorso del file nel progetto). Se l'utente non ti fa domande relative al progetto puoi rispondere in modo generico e dire che tu sei qui per rispondere alle domande del progetto. Sii consapevole che il progetto sono pezzi di file che ti do in base alla domanda dell' utente, se non hai il contenuto necessario significa che l'utente non ti ha fatto domande specifiche.\")\n        };\n    }\n\n    public async Task<float[]> GenerateEmbeddingAsync(string text)\n    {\n        try\n        {\n            var requestBody = new { input = text };\n            var jsonString = JsonSerializer.Serialize(requestBody);\n            var content = new StringContent(jsonString, Encoding.UTF8, \"application/json\");\n\n            var response = await _httpClient.PostAsync(_azureEmbeddingEndpoint, content);\n            response.EnsureSuccessStatusCode();\n\n            var responseString = await response.Content.ReadAsStringAsync();\n            var jsonResponse = JsonSerializer.Deserialize<Dictionary<string, object>>(responseString);\n\n            var dataArray = (JsonElement)jsonResponse[\"data\"];\n            var embeddingArray = dataArray[0].GetProperty(\"embedding\");\n\n            var embedding = JsonSerializer.Deserialize<float[]>(embeddingArray.GetRawText());\n            return embedding;\n        }\n        catch (HttpRequestException ex)\n        {\n            Console.WriteLine($\"Errore nella richiesta HTTP: {ex.Message}\");\n            throw;\n        }\n        catch (JsonException ex)\n        {\n            Console.WriteLine($\"Errore nella deserializzazione JSON: {ex.Message}\");\n            throw;\n        }\n        catch (Exception ex)\n        {\n            Console.WriteLine($\"Errore generico durante la generazione dell'embedding: {ex.Message}\");\n            throw;\n        }\n    }\npublic async Task<List<string>> SearchDocumentsWithEmbeddingAsync(string queryText)\n{\n    try\n    {\n        var queryEmbedding = await GenerateEmbeddingAsync(queryText);\n\n        var searchResponse = _elasticClient.Search<dynamic>(s => s\n            .Query(q => q\n                .ScriptScore(ss => ss\n                    .Query(qq => qq.MatchAll())\n                    .Script(script => script\n                        .Source(\"cosineSimilarity(params.query_vector, 'embedding') + 1.0\")\n                        .Params(p => p.Add(\"query_vector\", queryEmbedding))\n                    )\n                )\n            )\n            .Size(1)\n        );\n\n        if (!searchResponse.IsValid)\n        {\n            Console.WriteLine($\"Errore nella ricerca: {searchResponse.DebugInformation}\");\n            return new List<string>();\n        }\n\n        var documents = new List<string>();\n        foreach (var hit in searchResponse.Hits)\n        {\n            // Usa TryGetValue per verificare la presenza dei campi\n            hit.Source.TryGetValue(\"content\", out object contentValue);\n            hit.Source.TryGetValue(\"file_name\", out object fileNameValue);\n            hit.Source.TryGetValue(\"path\", out object pathValue);\n\n            string content = contentValue?.ToString() ?? \"N/A\";\n            string fileName = fileNameValue?.ToString() ?? \"N/A\";\n            string path = pathValue?.ToString() ?? \"N/A\";\n\n            string document = $\"Content: {content}, File Name: {fileName}, Path: {path}\";\n            documents.Add(document);\n        }\n\n\n        return documents;\n    }\n    catch (Exception ex)\n    {\n        Console.WriteLine($\"Errore durante la ricerca dei documenti: {ex.Message}\");\n        return new List<string>();\n    }\n}\n\n    public async Task<string> GetResponseAsync(string userInput)\n    {\n        try\n        {\n            _chatHistory.Add(new ChatMessageContent(\"user\", userInput));\n\n            var searchResults = await SearchDocumentsWithEmbeddingAsync(userInput);\n            var finalContent = $\"CONTENUTO DEL PROGETTO CHE DEVI ANALIZZARE ATTENTAMENTE PER RISPONDERE ALL' UTENTE:\";\n            foreach (var result in searchResults)\n            {\n                finalContent += $\"{result}\";\n            }\n\n            _chatHistory.Add(new ChatMessageContent(\"system\", $\"{finalContent}\"));\n\n            const int maxHistoryMessages = 4;\n\n            if (_chatHistory.Count > maxHistoryMessages)\n            {\n                // Mantieni il primo messaggio di sistema e limita i successivi a un massimo di 3\n                var systemMessage = _chatHistory[0];\n                var recentMessages = _chatHistory.Skip(_chatHistory.Count - (maxHistoryMessages - 1)).ToList();\n                _chatHistory.Clear();\n                _chatHistory.Add(systemMessage);\n                _chatHistory.AddRange(recentMessages);\n            }\n            var messages = _chatHistory.Select(message => new\n            {\n                role = message.Role,\n                content = CleanContent(message.Content)\n            }).ToList();\n\n            var requestBody = new\n            {\n                messages = messages,\n                max_tokens = 500,\n                temperature = 0.5, // Valore per rendere le risposte più variate\n            };\n\n            var jsonString = JsonSerializer.Serialize(requestBody);\n            var content = new StringContent(jsonString, Encoding.UTF8, \"application/json\");\n\n            // Invio la richiesta all'IA di Azure\n            string azureChatEndpoint = _azureCompletionEndpoint;\n            var response = await _httpClient.PostAsync(azureChatEndpoint, content);\n            response.EnsureSuccessStatusCode();\n\n            var responseString = await response.Content.ReadAsStringAsync();\n            var jsonResponse = JsonSerializer.Deserialize<Dictionary<string, object>>(responseString);\n            var choices = (JsonElement)jsonResponse[\"choices\"];\n            var messageContent = choices[0].GetProperty(\"message\").GetProperty(\"content\").GetString();\n\n            _chatHistory.Add(new ChatMessageContent(\"assistant\", messageContent));\n            return messageContent;\n        }\n        catch (HttpRequestException ex)\n        {\n            Console.WriteLine($\"Errore nella richiesta HTTP: {ex.Message}\");\n            return \"Errore durante la richiesta al servizio di completamento.\";\n        }\n        catch (JsonException ex)\n        {\n            Console.WriteLine($\"Errore nella deserializzazione JSON: {ex.Message}\");\n            return \"Errore durante l'elaborazione della risposta del servizio di completamento.\";\n        }\n        catch (Exception ex)\n        {\n            Console.WriteLine($\"Errore generico durante la generazione della risposta: {ex.Message}\");\n            return \"Si è verificato un errore durante la generazione della risposta.\";\n        }\n    }\n\n    private string CleanContent(string content)\n    {\n        // Rimuove i commenti di linea (//) preservando le stringhe\n        content = Regex.Replace(content, @\"(?<!:)//.*\", string.Empty);\n\n        // Rimuove i commenti di blocco (/* */) preservando le stringhe\n        content = Regex.Replace(content, @\"/\\*.*?\\*/\", string.Empty, RegexOptions.Singleline);\n\n        // Rimuove linee vuote e spaziature superflue\n        content = Regex.Replace(content, @\"^\\s*$\\n|\\r\", string.Empty, RegexOptions.Multiline);\n\n        // Rimuove spaziature all'inizio e alla fine del testo\n        content = content.Trim();\n\n        return content;\n    }\n}\n\npublic class ChatMessageContent\n{\n    public string Role { get; }\n    public string Content { get; }\n\n    public ChatMessageContent(string role, string content)\n    {\n        Role = role;\n        Content = content;\n    }\n}\n",
  "embedding": [
    -0.016087765,
    0.018467221,
    -0.010350633,
    -0.0021249864,
    0.0058957627,
    0.014104886,
    0.002045671,
    -0.013774405,
    -0.022142159,
    -0.030166212,
    -0.0035526599,
    0.01072738,
    -0.0069797374,
    -0.026266549,
    -0.009332755,
    -0.0051455735,
    0.019947771,
    -0.017052768,
    0.00021439888,
    -0.034449235,
    -0.0025744392,
    0.015426805,
    0.025407301,
    0.017264275,
    -0.011335463,
    -0.026372302,
    -0.0018225971,
    -0.021256473,
    0.01436927,
    -0.030271966,
    0.016537217,
    -0.038335677,
    -0.003942626,
    -0.01915462,
    -0.013060569,
    0.006408007,
    -0.0025810488,
    0.007898471,
    0.020714486,
    0.0051290495,
    0.009808646,
    -0.0029924964,
    0.011289196,
    -0.008737891,
    -0.031937584,
    0.013681871,
    -0.008989056,
    -0.018520098,
    0.00668561,
    0.0046961205,
    0.024746342,
    0.018454002,
    -0.025354424,
    0.013681871,
    -0.01669585,
    0.012102177,
    -0.015215298,
    0.021071404,
    0.009835084,
    0.013827283,
    0.0032734042,
    0.014779065,
    -0.013523241,
    -0.009141076,
    0.00039740218,
    -0.006589771,
    -0.0039690644,
    -0.0012293855,
    0.0051488783,
    -0.016920576,
    0.0064641885,
    0.019551195,
    0.0043325927,
    -0.02608148,
    0.037912663,
    0.014977353,
    0.018083865,
    -0.03402622,
    0.0027710747,
    -0.0032304418,
    0.022406543,
    -0.037251703,
    -0.011150395,
    -0.0031593887,
    0.0088766925,
    0.018467221,
    0.014091667,
    0.024971068,
    -0.0036584134,
    -0.01599523,
    0.0071449773,
    -0.004408603,
    0.0027875986,
    0.020780582,
    0.009782207,
    -0.0045936718,
    -0.021031747,
    0.02707292,
    -0.0031131215,
    -0.02527511,
    -0.00478535,
    0.008691624,
    -0.03733102,
    -0.0023364935,
    -0.027125796,
    -0.004177267,
    0.015056668,
    -0.022023186,
    0.021877775,
    0.01600845,
    0.00089229597,
    0.02477278,
    0.0013681871,
    -0.021044966,
    0.0026884547,
    -0.0027859462,
    0.040688697,
    -0.024534835,
    -0.0005188536,
    -0.015942354,
    -0.014475023,
    0.015796943,
    -0.0021861251,
    0.0032304418,
    0.031170871,
    0.013100226,
    -0.026359083,
    -0.0293995,
    -0.006973128,
    0.0064113117,
    -0.009174124,
    -0.010886011,
    0.014461804,
    0.0053240326,
    -0.022855995,
    0.01848044,
    -0.029743198,
    0.008612309,
    -0.010654675,
    0.0045969766,
    -0.0028355182,
    0.03912883,
    0.0035559647,
    -0.008995665,
    0.010277928,
    0.020079963,
    -0.018771263,
    0.004325983,
    0.01584982,
    0.027337303,
    0.0068872026,
    -0.014223859,
    -0.018242495,
    0.030351281,
    -0.021044966,
    0.014356051,
    0.015215298,
    0.015294613,
    -0.013721528,
    -0.031091556,
    0.0068872026,
    0.037013758,
    0.006044479,
    -0.033047996,
    0.015796943,
    0.016206738,
    -0.004246668,
    -0.01849366,
    0.009273268,
    -0.024389423,
    -0.024838876,
    0.011963376,
    -0.04822364,
    -0.00227205,
    -0.0061965,
    -0.010443168,
    0.0038732253,
    0.012419438,
    -0.0063848733,
    -0.015823381,
    -0.00453749,
    0.03183183,
    0.018850578,
    -0.0017779823,
    0.0013293558,
    -0.024098601,
    -0.0032833186,
    -0.0052248887,
    0.031646762,
    -0.019379346,
    0.027416619,
    0.025618808,
    -0.011203271,
    -0.05282392,
    -0.5977193,
    0.0005382693,
    0.045606237,
    0.0053603854,
    0.024918191,
    0.006632733,
    -0.0047126445,
    0.006322082,
    0.0018242495,
    0.05099967,
    0.010786867,
    0.007819156,
    -0.009980495,
    0.018572975,
    0.025473397,
    -0.00050067715,
    0.01930003,
    -0.045103908,
    0.010839744,
    0.005400043,
    -0.015056668,
    0.022340447,
    -0.030086897,
    -0.015982011,
    -0.014792284,
    0.003227137,
    -3.0775947e-05,
    0.0011434607,
    -0.006097356,
    0.021890994,
    -0.012630945,
    0.008149636,
    0.005674341,
    -0.0042698015,
    0.06287051,
    -0.008043882,
    -0.026200453,
    0.017806262,
    -0.0019366127,
    0.018956332,
    -0.024481958,
    -0.012207931,
    0.005221584,
    -0.008268609,
    0.01237978,
    0.0006477408,
    0.018057426,
    -0.012822623,
    -0.010998374,
    0.021917433,
    0.01963051,
    -0.00062915124,
    0.021111062,
    -0.0060246503,
    0.02178524,
    0.0069004223,
    0.02889717,
    -0.017541878,
    0.019419003,
    -0.007561382,
    -0.024389423,
    0.01569119,
    -0.01735681,
    -0.031567447,
    -0.015744066,
    0.03352389,
    -0.006424531,
    -0.0070260046,
    -0.015413586,
    -0.03926102,
    0.021124281,
    0.012320294,
    -0.0044846134,
    -0.015294613,
    0.003400639,
    0.02971676,
    0.041376095,
    -0.011890669,
    -0.013496802,
    0.011976595,
    -0.007812547,
    -0.018216057,
    -0.030166212,
    -0.005188536,
    -0.006163452,
    -0.018017769,
    -0.03405266,
    -0.005727218,
    0.0105621405,
    0.003830263,
    0.027971826,
    0.025327986,
    -0.030060459,
    0.0009633491,
    -0.010145736,
    0.01271026,
    0.00095673953,
    -0.0040021124,
    0.023001406,
    -0.023887092,
    0.010231661,
    0.015915915,
    0.020436883,
    0.016233176,
    0.033576768,
    0.014990572,
    -0.0145279,
    0.0049737236,
    0.0066591715,
    -0.024402643,
    -0.0018672119,
    -0.02412504,
    -0.025129698,
    -0.038494308,
    -0.013906598,
    -0.018070646,
    0.025751,
    -0.005185231,
    0.014052009,
    0.0020869812,
    -0.011018203,
    0.015202079,
    0.014660092,
    -0.010694332,
    -0.0076803546,
    0.008347925,
    -0.019419003,
    -0.016894137,
    0.0019977514,
    -0.0013252248,
    -0.0026587115,
    -0.01735681,
    0.021084623,
    -0.00775967,
    0.044310756,
    -0.0013045698,
    0.024415862,
    0.0048944084,
    0.011639505,
    -0.009484775,
    -0.0053273374,
    0.009828474,
    0.00094186794,
    0.00095921813,
    0.0019283507,
    -0.012730089,
    -0.009656625,
    0.0011922065,
    0.0033708957,
    0.009689673,
    0.004577148,
    0.0041409144,
    -0.015611874,
    0.012406219,
    -0.0067616203,
    -0.011864231,
    -0.023014626,
    -0.030880049,
    0.033973344,
    -0.03714595,
    -0.0047655213,
    0.024164697,
    -0.021653049,
    0.013959475,
    -0.0244423,
    -0.002830561,
    -0.0142106395,
    0.015241737,
    0.0009939185,
    -0.016444683,
    0.01599523,
    -0.00594203,
    -0.0005271156,
    0.0041904864,
    0.008347925,
    0.0051654023,
    -0.040530067,
    -0.020357568,
    0.03910239,
    -0.0035592695,
    -0.016735507,
    0.026187234,
    0.0067087435,
    -0.016537217,
    0.011335463,
    -0.0073366556,
    0.05715982,
    0.025499836,
    -0.010165565,
    0.018097084,
    -0.005413262,
    -0.00051100465,
    -0.0100069335,
    0.02839484,
    0.0005473575,
    -0.004074818,
    -0.010205222,
    -0.004768826,
    0.003896359,
    -0.020569075,
    0.029769637,
    0.010053201,
    0.026319426,
    0.008671795,
    -0.0036220606,
    -0.011461046,
    -0.021031747,
    -0.017740166,
    0.034766495,
    0.004243363,
    0.020027086,
    -0.016537217,
    -0.02427045,
    0.008949398,
    -0.008354534,
    -0.0014169329,
    -0.0038401773,
    0.0039525405,
    -0.010548921,
    0.026980385,
    0.00037282272,
    -0.010377072,
    0.010747209,
    -0.006441055,
    -0.026795316,
    0.009431899,
    0.008903131,
    0.017462563,
    0.020172497,
    -0.008486726,
    0.0040351604,
    0.029928267,
    0.000104875755,
    -0.014012352,
    0.019736264,
    -0.014884818,
    0.0018672119,
    0.0031494743,
    0.02971676,
    -0.0049704188,
    0.0013103532,
    -0.01633893,
    0.004210315,
    -0.026557371,
    0.047853503,
    -0.014131324,
    0.03487225,
    -0.013787624,
    0.014501462,
    0.0023711938,
    -0.017158521,
    -0.000652698,
    -0.009345974,
    0.007230902,
    0.0099408375,
    -0.024719903,
    -0.0053240326,
    -0.0032320942,
    -0.009874742,
    0.038652938,
    0.0022356971,
    -0.0031957414,
    0.015453244,
    0.009947447,
    -0.0018688643,
    -0.016814822,
    -0.032387037,
    -0.010958716,
    -0.022551954,
    -0.03103868,
    0.002747941,
    -0.020265033,
    0.011236319,
    -0.013080398,
    0.027443057,
    0.012663993,
    0.0360091,
    0.046002813,
    0.009193953,
    -0.0010724076,
    -0.0077332314,
    -0.006834326,
    0.006867374,
    -0.004983638,
    0.017779823,
    -0.012274027,
    -0.006973128,
    -0.0059684683,
    -0.014356051,
    0.02445552,
    0.008526384,
    0.026041823,
    -0.00030404158,
    -0.010952107,
    0.00974255,
    0.015083106,
    0.01882414,
    -0.009768988,
    -0.033180192,
    -0.007938129,
    0.008070321,
    0.0020588902,
    -0.028712101,
    -0.00034018783,
    0.013470364,
    -0.018929893,
    -0.021349007,
    0.0034832591,
    -0.013020911,
    -0.018758044,
    -0.0029330098,
    0.021401884,
    -0.0075151147,
    0.008387582,
    0.0042863255,
    0.016629754,
    0.005320728,
    -0.009306316,
    0.04195774,
    0.015175641,
    -0.032122653,
    -0.03696088,
    -0.01599523,
    -0.017938454,
    0.016735507,
    0.031408817,
    0.011632895,
    0.008651966,
    0.00643775,
    -0.006044479,
    -0.02412504,
    0.0022125635,
    -0.0090882,
    -0.010026762,
    -0.01784592,
    0.00049902475,
    0.029928267,
    0.030166212,
    -0.004342507,
    -0.0121814925,
    0.0013896683,
    -0.0102184415,
    0.025883192,
    -0.029611006,
    0.01303413,
    0.044363633,
    -0.018837359,
    0.014237078,
    0.013053959,
    -0.0052116695,
    0.006213024,
    -0.0007650612,
    -0.022155378,
    -0.042063493,
    0.00974255,
    0.041851986,
    0.019987429,
    0.017092425,
    -0.00792491,
    0.044284318,
    -0.010092858,
    0.014712969,
    0.019656949,
    6.227482e-05,
    0.0031048595,
    0.006027955,
    -0.022525515,
    0.0015970445,
    0.029346623,
    -0.04555336,
    -0.01600845,
    0.029029362,
    -0.028659225,
    -0.0072110733,
    0.013668652,
    0.012703651,
    -0.028209772,
    -4.928799e-05,
    0.0064344453,
    0.008546213,
    -0.018110303,
    -0.011209881,
    -0.014170982,
    -0.0085329935,
    -0.04341185,
    -0.030086897,
    -0.016603315,
    -0.017700508,
    -0.01945866,
    -0.02312038,
    -0.015387148,
    0.018282153,
    -0.002293531,
    0.017753385,
    0.026702782,
    -0.012987863,
    -0.02475956,
    0.013338172,
    0.023675585,
    -0.00016554982,
    0.012796185,
    -0.016999891,
    -0.00091625575,
    -0.005419872,
    0.015162421,
    -0.038679376,
    0.028632786,
    -0.009914399,
    -0.011586628,
    0.0030271967,
    -0.0032304418,
    -0.03910239,
    -0.0015251652,
    0.01600845,
    -0.010786867,
    -0.008651966,
    -0.0028355182,
    0.008374363,
    0.026649905,
    0.0068541546,
    -0.0142106395,
    0.033338822,
    -0.0006398919,
    -0.039234582,
    -0.010628236,
    -0.013602556,
    0.0029148334,
    -0.0009906137,
    0.011751868,
    0.0102514895,
    -0.011110737,
    0.029029362,
    -0.029267307,
    -0.0099077895,
    0.011963376,
    0.012782966,
    0.012571459,
    -0.023516955,
    -0.0049076276,
    -0.010033372,
    0.008870083,
    0.003863311,
    -0.020952431,
    -0.021705925,
    0.025380863,
    -0.043491166,
    0.026438398,
    0.02146798,
    -0.024521615,
    0.00824217,
    0.020198936,
    -0.0034072485,
    -0.006206414,
    0.0064939316,
    -0.018229276,
    -0.001288872,
    -0.04026568,
    -0.042222124,
    -0.017224617,
    -0.02510326,
    -0.0010963674,
    -0.0018242495,
    0.022697365,
    0.004491223,
    -0.02162661,
    -0.01832181,
    -0.022855995,
    0.0052314983,
    -0.011361902,
    -0.036564305,
    0.0034204677,
    0.0061998046,
    0.004686206,
    0.027152235,
    -0.0056016357,
    0.00989457,
    -0.024653807,
    -0.04079445,
    -0.028051142,
    -0.00094104174,
    0.014831942,
    -0.01304735,
    0.024415862,
    0.016656192,
    0.052771043,
    -0.018017769,
    0.015109545,
    -0.021058185,
    -0.007528334,
    -0.004147524,
    0.009200563,
    -0.009431899,
    0.008889912,
    0.009702892,
    -0.00092534395,
    0.0320169,
    0.008209122,
    -0.022076063,
    -0.01633893,
    0.029690322,
    -0.01485838,
    -0.02412504,
    -0.035427455,
    -0.029796075,
    -0.01154697,
    0.030060459,
    -0.011996424,
    0.020740924,
    -0.0161803,
    -0.013562898,
    0.049254738,
    0.006325387,
    0.033471014,
    0.020701267,
    0.021216815,
    -0.019683387,
    -0.008863473,
    -0.008129807,
    -0.017422905,
    -0.013840502,
    0.005267851,
    -0.024204355,
    -0.015783723,
    0.026041823,
    0.012003033,
    0.02011962,
    0.025962507,
    0.013549679,
    0.0036584134,
    0.011454436,
    -0.015598655,
    -0.005218279,
    0.0041343044,
    -0.0050926968,
    -0.04769487,
    -0.028156895,
    -0.008414021,
    -0.02260483,
    -0.009887961,
    0.009762378,
    0.004788655,
    0.013615775,
    -0.019617291,
    0.009319535,
    -0.03183183,
    -0.015334271,
    0.037674718,
    0.02359627,
    0.019762702,
    0.013615775,
    0.00081917725,
    -0.0067550107,
    0.012816014,
    -0.018348249,
    -0.011969985,
    0.02212894,
    0.035876907,
    0.012756527,
    0.0017845919,
    0.014289955,
    -0.0037377286,
    -0.017726947,
    -0.01254502,
    0.014712969,
    0.037013758,
    -0.0066261236,
    -0.018229276,
    -0.022340447,
    -0.014329612,
    0.014356051,
    -0.036194168,
    -0.0066922195,
    0.009134467,
    -0.0060213455,
    -0.039313897,
    0.0031346027,
    0.002921443,
    0.050893918,
    0.008215732,
    0.04026568,
    -0.02358305,
    -0.019035647,
    -0.00941207,
    -0.0011269368,
    0.0051819263,
    0.02445552,
    -0.036696497,
    -0.026557371,
    0.0036749374,
    0.024151478,
    -0.006222938,
    0.0028156894,
    0.023569832,
    0.025949288,
    -0.019419003,
    -0.00045978028,
    0.011295806,
    -0.009683063,
    0.019181058,
    -0.010046591,
    0.0011533751,
    0.032122653,
    -0.029320184,
    -0.0026884547,
    0.02096565,
    0.00020148951,
    0.018110303,
    -0.005069563,
    -0.00603126,
    -0.009934228,
    -0.008136417,
    0.020159278,
    -0.0101523455,
    -0.010707552,
    -0.018229276,
    0.008956008,
    -0.0027495935,
    0.025235452,
    0.0049935523,
    -0.004061599,
    -0.0018903455,
    0.018731605,
    0.008116588,
    -0.002020885,
    0.023133598,
    0.0061832806,
    -0.0006675696,
    -7.162121e-05,
    -0.02227435,
    0.026557371,
    0.010092858,
    -0.004838227,
    -0.025129698,
    -0.028315526,
    0.013999132,
    0.03976335,
    0.009854913,
    0.00742919,
    -0.0013153104,
    -0.011071079,
    0.0012996126,
    -0.0153739285,
    -0.025936069,
    0.03355033,
    0.019590853,
    -0.027839635,
    0.016127422,
    -0.012597897,
    0.016114203,
    0.0037707766,
    -0.008493336,
    0.000120521916,
    -0.0320169,
    -0.016061326,
    0.0009881351,
    -0.006388178,
    -0.021758802,
    -0.013470364,
    -0.0145543385,
    0.0016342235,
    -0.019590853,
    -0.0036617182,
    0.0012673908,
    -0.004768826,
    -0.014184201,
    0.00603126,
    0.029478814,
    -0.00039760873,
    -0.00924022,
    -0.02509004,
    -0.037436772,
    0.007805937,
    -0.029002924,
    0.009068371,
    0.018546537,
    0.022922091,
    0.01584982,
    -0.0105621405,
    -0.027178673,
    -0.0105621405,
    -0.039472528,
    -0.011870841,
    -0.026491275,
    -0.0005469444,
    0.017198179,
    0.033338822,
    -0.022538735,
    0.0356654,
    -0.006665781,
    0.017224617,
    -0.0031676507,
    0.01599523,
    -0.01866551,
    -0.013338172,
    0.008949398,
    0.0042334488,
    -0.018202838,
    0.022882434,
    -0.00037860614,
    -0.015162421,
    0.0049241516,
    0.011467655,
    -0.0037509478,
    -0.02162661,
    0.006533589,
    0.00095508713,
    -0.0020274946,
    0.0010178783,
    0.014950914,
    -0.019167839,
    0.024257232,
    0.00048539246,
    -0.026345864,
    0.006292339,
    0.0060576983,
    0.04010705,
    0.012941596,
    -0.00843385,
    -0.03809773,
    -0.004359031,
    -0.049016792,
    -0.021653049,
    0.05134337,
    -0.0023579746,
    -0.022803118,
    0.04230144,
    0.003276709,
    -0.013397658,
    0.0011988161,
    0.03714595,
    -0.0022175207,
    -0.0060709175,
    0.023464078,
    -0.028527033,
    0.0026124443,
    -0.005350471,
    0.009709502,
    0.0012905244,
    -0.0145543385,
    0.008896521,
    0.02080702,
    -0.04148185,
    0.00042425367,
    0.027628127,
    -0.035718277,
    0.0028189942,
    0.01436927,
    0.012650774,
    -0.018797701,
    -0.040133487,
    0.02393997,
    -0.032122653,
    -0.011903889,
    0.019921333,
    -0.02096565,
    -0.0014871599,
    0.045315415,
    0.012855671,
    0.0031990462,
    0.014607215,
    0.18432851,
    -0.02527511,
    -0.01997421,
    0.014289955,
    -0.013589337,
    -0.0076010395,
    -0.0055751973,
    0.018467221,
    -0.014779065,
    0.027416619,
    0.01799133,
    -0.0077993274,
    0.01255163,
    -0.00025860057,
    0.0068541546,
    -0.0145543385,
    -0.016299272,
    -0.030589227,
    0.026121138,
    -0.0015623441,
    -0.0023778034,
    -0.0058957627,
    0.0077001834,
    -0.004706035,
    0.017462563,
    0.001540863,
    -0.01600845,
    -0.021388665,
    0.01436927,
    0.006764925,
    -0.009200563,
    0.027866073,
    0.017687289,
    0.022710584,
    -0.03452855,
    -0.015558997,
    0.01388016,
    -0.01255163,
    0.007660526,
    0.0034667351,
    0.036696497,
    -0.018929893,
    3.968342e-05,
    -0.023477297,
    -0.018242495,
    -0.016947014,
    -0.0008741196,
    -0.040292118,
    0.0038567013,
    0.026345864,
    -0.003516307,
    -0.00924022,
    0.00512244,
    0.013919817,
    0.0012310379,
    0.023860654,
    0.029029362,
    0.018520098,
    -0.019260373,
    -0.0077134026,
    -0.020780582,
    0.020278253,
    0.0211375,
    -0.0009650015,
    -0.011183443,
    -0.012148445,
    -0.03500444,
    -0.019921333,
    -0.011784916,
    0.024495177,
    -0.004246668,
    -0.007951348,
    -0.02013284,
    0.018110303,
    -0.03299512,
    -0.04164048,
    0.041508287,
    0.014342831,
    0.022009967,
    0.025142917,
    -0.0019184363,
    0.015704408,
    0.023569832,
    -0.014329612,
    -0.02688785,
    -0.04840871,
    0.025949288,
    -0.009293097,
    -0.027020043,
    0.0021497724,
    -0.0012169925,
    -0.00892296,
    -0.011110737,
    -0.00015398301,
    0.006652562,
    0.0068277162,
    0.031620324,
    0.008552822,
    -0.0010434906,
    0.016550437,
    -0.028632786,
    0.03534814,
    0.022855995,
    0.007931519,
    -0.045606237,
    0.0012921768,
    -0.018691948,
    -0.0031792175,
    0.0018820835,
    -0.005155488,
    -0.015453244,
    -0.021071404,
    0.017806262,
    -0.0005589243,
    -0.02031791,
    -0.013404268,
    -0.010648065,
    0.0026487971,
    -5.0630566e-05,
    0.00040318558,
    0.0059882975,
    -0.008678405,
    -0.01485838,
    0.037833348,
    -0.0014359355,
    -0.037912663,
    -0.01684126,
    0.0040516844,
    -0.009623577,
    -0.029584568,
    0.0019498318,
    -0.012128616,
    -0.0029098762,
    0.014712969,
    0.0055751973,
    0.0014665049,
    0.00792491,
    -0.016259614,
    -0.014633654,
    -0.0043986887,
    0.039313897,
    -0.022181816,
    0.012346732,
    0.013959475,
    0.0027380267,
    -0.010773648,
    0.013562898,
    0.010608408,
    -0.024521615,
    -0.029425938,
    -0.04507747,
    0.0039525405,
    0.0058660195,
    -0.012445876,
    0.015003791,
    -0.007819156,
    -0.019286811,
    -0.013153103,
    -0.0237549,
    -0.009636796,
    -0.036114853,
    -0.0012376475,
    0.0018572975,
    -0.023358325,
    -0.0022092587,
    -0.0145543385,
    -0.16391808,
    0.010581969,
    0.020238595,
    -0.035242386,
    0.015783723,
    0.022049624,
    -0.017224617,
    -0.0015673013,
    -0.0065137604,
    -0.02559237,
    -0.0049770284,
    -0.0051092207,
    -0.03957828,
    -0.034237728,
    -0.011685772,
    0.015149202,
    0.017145302,
    -0.013893379,
    0.030351281,
    0.017938454,
    0.022551954,
    -0.034290604,
    0.0010269665,
    -0.014078448,
    0.024468739,
    0.008546213,
    -0.015334271,
    0.03664362,
    0.005690865,
    -0.023345105,
    -0.017687289,
    -0.024799218,
    0.037410334,
    0.0138669405,
    0.023041064,
    0.014170982,
    0.04822364,
    0.020569075,
    -0.025671685,
    0.01980236,
    0.042248562,
    0.027099358,
    0.0024125038,
    0.008070321,
    0.01615386,
    0.008625528,
    0.020159278,
    -0.031276625,
    0.012293856,
    0.0053736046,
    -0.00495059,
    -0.044442948,
    0.0038236533,
    0.0008592479,
    0.0038335677,
    0.012188102,
    0.0013937993,
    0.046584457,
    -0.0048448364,
    -0.0021844727,
    0.008552822,
    -0.02642518,
    -0.012571459,
    -0.013100226,
    0.016286053,
    -0.0035923175,
    -0.035638962,
    0.02309394,
    0.0046829013,
    0.004395384,
    -0.006814497,
    0.004996857,
    0.0070921006,
    -0.00989457,
    0.021401884,
    0.007376313,
    -0.00437886,
    0.003293233,
    0.017978111,
    0.0016829693,
    -0.0054760533,
    0.01814996,
    -0.010310976,
    0.015122764,
    -0.007396142,
    0.015704408,
    0.0053901286,
    -0.016286053,
    -0.04840871,
    0.022195036,
    0.013721528,
    -0.009954057,
    -0.0040483796,
    0.01784592,
    0.0031412123,
    0.007845595,
    0.013562898,
    0.002652102,
    -0.00069524726,
    -0.0016036541,
    0.00034431883,
    -0.017859139,
    -0.0033874197,
    -0.010119298,
    0.014950914,
    -0.011969985,
    0.003276709,
    0.016537217,
    0.009683063,
    -0.011038031,
    -0.01899599,
    0.016629754,
    0.026689563,
    0.026292987,
    -0.037516087,
    0.0290558,
    -0.027628127,
    -0.002962753,
    0.0033808101,
    0.0063121677,
    0.071436554,
    -0.013893379,
    -0.020555856,
    0.02163983,
    0.006973128,
    0.01899599,
    -0.07608971,
    0.0023530175,
    -0.01138173,
    -0.01419742,
    0.008797377,
    0.031435255,
    -0.0009757421,
    0.0194851,
    -0.013827283,
    0.020079963,
    -0.002392675,
    -0.008777549,
    -0.00301563,
    -0.0075349435,
    0.024627369,
    -0.0044647846,
    -0.008632137,
    0.010125907,
    -0.0386265,
    0.025076821,
    0.013576117,
    -0.0138669405,
    0.006860764,
    -0.02723155,
    -0.01057536,
    0.0042202296,
    -0.018189618,
    0.014818722,
    0.029928267,
    -0.03992198,
    0.04343829,
    -0.025341205,
    0.013470364,
    -0.029002924,
    -0.01304074,
    0.004458175,
    -0.019167839,
    -0.02327901,
    0.030589227,
    -0.021520857,
    -0.0016532261,
    0.0039393213,
    -0.015228517,
    -0.04145541,
    0.003615451,
    -0.0077993274,
    -0.0034568207,
    0.024138259,
    -0.0030833783,
    -0.0043557263,
    0.0046762917,
    -0.025671685,
    -0.027654566,
    0.0014929433,
    0.040371433,
    0.042063493,
    -0.004920847,
    -0.015043449,
    -0.03534814,
    -0.025380863,
    -0.00040545763,
    -0.02526189,
    -0.02971676,
    0.023173256,
    0.017079206,
    0.0061998046,
    -0.03846787,
    -0.0029115286,
    -0.029848952,
    -0.003235399,
    -0.04460158,
    0.012155054,
    -0.0053901286,
    -7.0072085e-05,
    -0.0042565824,
    0.036061976,
    0.0031379075,
    -0.021692706,
    0.008718062,
    0.004038465,
    -0.008407411,
    -0.0033444574,
    0.00726395,
    0.010039981,
    0.017383248,
    -0.004963809,
    -0.008308267,
    -0.001127763,
    -0.02475956,
    -0.038864445,
    0.020502979,
    -0.0010335761,
    0.002524867,
    0.003995503,
    -0.015334271,
    -0.015241737,
    -0.014144544,
    0.0010765386,
    0.017132083,
    0.019855237,
    -0.0043986887,
    -0.007541553,
    -0.060015164,
    0.0153739285,
    -0.00034245988,
    -0.028817855,
    0.006193195,
    -0.024429081,
    -0.0052645463,
    -0.0058990675,
    0.0027826414,
    0.031964023,
    0.00074481923,
    0.02080702,
    0.0033147142,
    -0.00013942124,
    -0.017555097,
    0.02048976,
    0.047456924,
    -0.008856864,
    0.00045978028,
    -0.020992089,
    -0.014342831,
    0.01369509,
    0.0102184415,
    0.02179846,
    -0.0005725566,
    0.009160905,
    -0.0033791577,
    0.052691728,
    -0.0121814925,
    -0.023212913,
    0.0042037056,
    -0.013397658,
    0.015902696,
    0.025460178,
    0.016510779,
    0.005119135,
    0.017158521,
    0.017819481,
    -0.0055751973,
    0.03569184,
    -0.044442948,
    -0.034396358,
    0.011791525,
    -0.018929893,
    -0.01369509,
    0.0032816662,
    0.0035262215,
    -0.006880593,
    0.019392565,
    0.01485838,
    0.0035394407,
    0.0059618587,
    -0.027866073,
    -0.0419313,
    0.008308267,
    -0.009121248,
    0.03780691,
    0.009233611,
    0.011804745,
    -0.005347166,
    0.014012352,
    0.011137175,
    0.016272834,
    -0.022023186,
    0.0045143566,
    -0.014303174,
    -0.003086683,
    0.010919059,
    0.02674244,
    -0.023027845,
    -0.008803987,
    0.01023827,
    -0.005383519,
    0.0492283,
    -0.003863311,
    -0.0015962183,
    0.0010286189,
    0.028870732,
    -0.02309394,
    0.0017251056,
    0.00842063,
    0.0037079854,
    0.003615451,
    0.01468653,
    0.04290952,
    0.022327228,
    -0.0104960445,
    -0.012373171,
    -0.0122806365,
    -0.027046481,
    0.003268447,
    -0.017462563,
    0.006441055,
    0.003896359,
    0.005595026,
    -0.020450102,
    -0.006371654,
    0.015228517,
    0.034131974,
    0.019009208,
    0.023397982,
    0.0026223587,
    -0.0031742603,
    -0.038838007,
    0.011044641,
    -0.011414778,
    -0.037568964,
    -0.009312926,
    0.018705167,
    0.0005312466,
    0.0051422687,
    0.015096325,
    0.0022968359,
    0.024085382,
    -0.020727705,
    0.025446959,
    -0.031964023,
    -0.0224462,
    -0.03778047,
    0.028051142,
    -0.01518886,
    0.013602556,
    0.02358305,
    0.015915915,
    0.015770504,
    0.02657059,
    -0.0011517227,
    -0.014250297,
    -0.0077794986,
    0.018520098,
    -0.019286811,
    -0.003114774,
    -0.026940728,
    -0.009696282,
    -0.017872358,
    0.008929569,
    -0.016629754,
    0.011454436,
    -0.01980236,
    0.08338671,
    0.014950914,
    0.03386759,
    0.015321052,
    -0.0043193735,
    0.009392241,
    0.006573247,
    0.017740166,
    -0.0270597,
    -0.03185827,
    0.029452376,
    -0.008460288,
    -0.0018044207,
    -0.013338172,
    0.007396142,
    -0.016933795,
    -0.030086897,
    0.0333917,
    -0.0029495338,
    -0.0041739624,
    0.0015829991,
    0.007330046,
    0.018268934,
    -0.0038567013,
    -0.004392079,
    0.037093073,
    0.015254956,
    0.0048117884,
    -0.031223748,
    -0.010046591,
    0.01668263,
    0.03466074,
    -0.035427455,
    -0.013457145,
    -0.01632571,
    0.012168273,
    0.011361902,
    -0.015625093,
    -0.0021712536,
    0.0136554325,
    0.0042995447,
    0.04177267,
    -0.01468653,
    -0.008790768,
    -0.003879835,
    -0.0037873005,
    0.0006341085,
    -0.032201968,
    -0.037225265
  ]
}